---
import {ViewTransitions} from "astro:transitions"
import CommonHead from "../components/CommonHead.astro";
import "../styles/global.css";
import Banner from "../components/Banner.astro";
import Sidebar from "../components/Sidebar.astro";
import ParticleBg from "../../public/js/ParticleBg"; // Corrected import path
import SidebarToggle from "../components/SidebarToggle"; // Corrected import path
import MusicPlayerWrapper from "../components/MusicPlayerWrapper";

const {title, description, current = "/"} = Astro.props;
const isHome = Astro.url.pathname === "/";

---
<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <CommonHead {title}/>
    <title>Portfolio</title>
    <ViewTransitions/>
</head>

<body class="font-sans bg-black text-white relative">
<ParticleBg client:load className="bg-behind pointer-events-none" />

<!-- BANNER -->
<header class="fixed inset-x-0 top-0 z-50 pointer-events-auto">
    <Banner isHome={isHome} />
</header>

<!-- SIDEBAR TOGGLE -->
<SidebarToggle client:load />

<!-- SIDEBAR -->
<Sidebar/>

<!-- GRID CONTAINER -->
<div class="relative z-20 min-h-screen md:ml-64">

    <!-- MAIN (scrolls; important: min-h-0) -->
    <main class="relative z-10 min-h-screen p-4 md:p-6 pt-[80px] md:pt-[120px] pb-60">
        <div class="hero mb-4">
            <slot name="hero"/>
        </div>
        <slot/>
    </main>
</div>
<!-- Persistent Music Player -->
<!--<MusicPlayerWrapper client:load />-->

</body>
</html>